pipeline{
    agent any

    environment{
        PATH = "/opt/maven/bin:$PATH"
    }

    stages{
        stage("Git Checkout"){
            steps{
                git 'https://github.com/maheshdte/ValaxyTech-hello-world'

            }
       
         }

         stage("Maven Build"){
            sh "mvn clean package"
        }

        stage("deploy-dev"){
            sshagent(['declarative-dev']) {
              sh 'scp -o StrictHostKeyChecking=no webapp/target/webapp.war cloud_user@13.233.212.98:/opt/tomcat9/webapps/'
        }
        }
    }
}
